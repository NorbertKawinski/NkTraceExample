<configuration>
    <!-- NkTrace entry logs -->
    <appender name="NKTRACE_ENTRY" class="ch.qos.logback.core.ConsoleAppender">
        <filter class="ch.qos.logback.core.filter.EvaluatorFilter">
            <evaluator class="ch.qos.logback.classic.boolex.OnMarkerEvaluator">
                <marker>NkTraceEntry</marker>
            </evaluator>
            <OnMatch>NEUTRAL</OnMatch>
            <OnMismatch>DENY</OnMismatch>
        </filter>

        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <pattern>%date [%thread] %5level %mdc{NkTrace_Indent}&gt;&gt; %class{0}.%method%msg .\(%file:%line\) %n</pattern>
        </encoder>
    </appender>

    <!-- NkTrace entry logs -->
    <appender name="NKTRACE_EXIT" class="ch.qos.logback.core.ConsoleAppender">
        <filter class="ch.qos.logback.core.filter.EvaluatorFilter">
            <evaluator class="ch.qos.logback.classic.boolex.OnMarkerEvaluator">
                <marker>NkTraceExit</marker>
            </evaluator>
            <OnMatch>NEUTRAL</OnMatch>
            <OnMismatch>DENY</OnMismatch>
        </filter>

        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <pattern>%date [%thread] %5level %mdc{NkTrace_Indent}&lt;&lt; %class{0}.%method%msg .\(%file:%line\) %n</pattern>
        </encoder>
    </appender>

    <!-- Regular logs -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <filter class="ch.qos.logback.core.filter.EvaluatorFilter">
            <evaluator class="ch.qos.logback.classic.boolex.OnMarkerEvaluator">
                <marker>NkTraceEntry</marker>
                <marker>NkTraceExit</marker>
            </evaluator>
            <OnMatch>DENY</OnMatch>
            <OnMismatch>NEUTRAL</OnMismatch>
        </filter>

        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <pattern>%date [%thread] %5level %mdc{NkTrace_Indent}%msg .\(%file:%line\) %n</pattern>
        </encoder>
    </appender>

    <root level="all">
        <appender-ref ref="NKTRACE_ENTRY"/>
        <appender-ref ref="NKTRACE_EXIT"/>
        <appender-ref ref="CONSOLE"/>
    </root>
</configuration>